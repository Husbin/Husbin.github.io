<!DOCTYPE html>
<html style="display: none;" lang="zh">
    <head>
    <meta charset="utf-8">
    <!--
        © Material Theme
        https://github.com/viosey/hexo-theme-material
        Version: 1.5.2 -->
    <script>
        window.materialVersion = "1.5.2"
        // Delete localstorage with these tags
        window.oldVersion = [
            'codestartv1',
            '1.3.4',
            '1.4.0',
            '1.4.0b1',
            '1.5.0'
        ]
    </script>

    <!-- dns prefetch -->
    <meta http-equiv="x-dns-prefetch-control" content="on">














    <!-- Meta & Info -->
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta name="renderer" content="webkit">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!-- Title -->
    
    <title>
        
            Angular2-基于动态创建组件的可配置表单设计 | 
        
        Husbin
    </title>

    <!-- Favicons -->
    <link rel="icon shortcut" type="image/ico" href="/img/favicon.jpg">
    <link rel="icon" href="/img/favicon.jpg">

    <meta name="format-detection" content="telephone=no"/>
    <meta name="description" itemprop="description" content="I can not repair the compoter.">
    <meta name="keywords" content=",Angular2">
    <meta name="theme-color" content="#0097A7">

    <!-- Disable Fucking Bloody Baidu Tranformation -->
    <meta http-equiv="Cache-Control" content="no-transform" />
    <meta http-equiv="Cache-Control" content="no-siteapp" />

    <!--[if lte IE 9]>
        <link rel="stylesheet" href="/css/ie-blocker.css">

        
            <script src="/js/ie-blocker.zhCN.js"></script>
        
    <![endif]-->

    <!-- Import lsloader -->
    <script>(function(){window.lsloader={jsRunSequence:[],jsnamemap:{},cssnamemap:{}};lsloader.removeLS=function(a){try{localStorage.removeItem(a)}catch(b){}};lsloader.setLS=function(a,c){try{localStorage.setItem(a,c)}catch(b){}};lsloader.getLS=function(a){var c="";try{c=localStorage.getItem(a)}catch(b){c=""}return c};versionString="/*"+(window.materialVersion||"unknownVersion")+"*/";lsloader.clean=function(){try{var b=[];for(var a=0;a<localStorage.length;a++){b.push(localStorage.key(a))}b.forEach(function(e){var f=lsloader.getLS(e);if(window.oldVersion){var d=window.oldVersion.reduce(function(g,h){return g||f.indexOf("/*"+h+"*/")!==-1},false);if(d){lsloader.removeLS(e)}}})}catch(c){}};lsloader.clean();lsloader.load=function(f,a,b,d){if(typeof b==="boolean"){d=b;b=undefined}d=d||false;b=b||function(){};var e;e=this.getLS(f);if(e&&e.indexOf(versionString)===-1){this.removeLS(f);this.requestResource(f,a,b,d);return}if(e){var c=e.split(versionString)[0];if(c!=a){console.log("reload:"+a);this.removeLS(f);this.requestResource(f,a,b,d);return}e=e.split(versionString)[1];if(d){this.jsRunSequence.push({name:f,code:e});this.runjs(a,f,e)}else{document.getElementById(f).appendChild(document.createTextNode(e));b()}}else{this.requestResource(f,a,b,d)}};lsloader.requestResource=function(b,e,a,c){var d=this;if(c){this.iojs(e,b,function(h,f,g){d.setLS(f,h+versionString+g);d.runjs(h,f,g)})}else{this.iocss(e,b,function(f){document.getElementById(b).appendChild(document.createTextNode(f));d.setLS(b,e+versionString+f)},a)}};lsloader.iojs=function(d,b,g){var a=this;a.jsRunSequence.push({name:b,code:""});try{var f=new XMLHttpRequest();f.open("get",d,true);f.onreadystatechange=function(){if(f.readyState==4){if((f.status>=200&&f.status<300)||f.status==304){if(f.response!=""){g(d,b,f.response);return}}a.jsfallback(d,b)}};f.send(null)}catch(c){a.jsfallback(d,b)}};lsloader.iocss=function(f,c,h,a){var b=this;try{var g=new XMLHttpRequest();g.open("get",f,true);g.onreadystatechange=function(){if(g.readyState==4){if((g.status>=200&&g.status<300)||g.status==304){if(g.response!=""){h(g.response);a();return}}b.cssfallback(f,c,a)}};g.send(null)}catch(d){b.cssfallback(f,c,a)}};lsloader.iofonts=function(f,c,h,a){var b=this;try{var g=new XMLHttpRequest();g.open("get",f,true);g.onreadystatechange=function(){if(g.readyState==4){if((g.status>=200&&g.status<300)||g.status==304){if(g.response!=""){h(g.response);a();return}}b.cssfallback(f,c,a)}};g.send(null)}catch(d){b.cssfallback(f,c,a)}};lsloader.runjs=function(f,c,e){if(!!c&&!!e){for(var b in this.jsRunSequence){if(this.jsRunSequence[b].name==c){this.jsRunSequence[b].code=e}}}if(!!this.jsRunSequence[0]&&!!this.jsRunSequence[0].code&&this.jsRunSequence[0].status!="failed"){var a=document.createElement("script");a.appendChild(document.createTextNode(this.jsRunSequence[0].code));a.type="text/javascript";document.getElementsByTagName("head")[0].appendChild(a);this.jsRunSequence.shift();if(this.jsRunSequence.length>0){this.runjs()}}else{if(!!this.jsRunSequence[0]&&this.jsRunSequence[0].status=="failed"){var d=this;var a=document.createElement("script");a.src=this.jsRunSequence[0].path;a.type="text/javascript";this.jsRunSequence[0].status="loading";a.onload=function(){d.jsRunSequence.shift();if(d.jsRunSequence.length>0){d.runjs()}};document.body.appendChild(a)}}};lsloader.tagLoad=function(b,a){this.jsRunSequence.push({name:a,code:"",path:b,status:"failed"});this.runjs()};lsloader.jsfallback=function(c,b){if(!!this.jsnamemap[b]){return}else{this.jsnamemap[b]=b}for(var a in this.jsRunSequence){if(this.jsRunSequence[a].name==b){this.jsRunSequence[a].code="";this.jsRunSequence[a].status="failed";this.jsRunSequence[a].path=c}}this.runjs()};lsloader.cssfallback=function(e,c,b){if(!!this.cssnamemap[c]){return}else{this.cssnamemap[c]=1}var d=document.createElement("link");d.type="text/css";d.href=e;d.rel="stylesheet";d.onload=d.onerror=b;var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(d,a)};lsloader.runInlineScript=function(c,b){var a=document.getElementById(b).innerText;this.jsRunSequence.push({name:c,code:a});this.runjs()}})();</script>

    <!-- Import queue -->
    <script>function Queue(){this.dataStore=[];this.offer=b;this.poll=d;this.execNext=a;this.debug=false;this.startDebug=c;function b(e){if(this.debug){console.log("Offered a Queued Function.")}if(typeof e==="function"){this.dataStore.push(e)}else{console.log("You must offer a function.")}}function d(){if(this.debug){console.log("Polled a Queued Function.")}return this.dataStore.shift()}function a(){var e=this.poll();if(e!==undefined){if(this.debug){console.log("Run a Queued Function.")}e()}}function c(){this.debug=true}}var queue=new Queue();</script>

    <!-- Import CSS -->
    
        <style id="material_css"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("material_css","/css/material.min.css?Z7a72R1E4SxzBKR/WGctOA==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>
        <style id="style_css"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("style_css","/css/style.min.css?MKetZV3cUTfDxvMffaOezg==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>

        
            
                <style id="prettify_css"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("prettify_css","/css/prettify.min.css?zp8STOU9v89XWFEnN+6YmQ==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>
                <style id="prettify_theme"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("prettify_theme","/css/prettify/github-v2.min.css?AfzKxt++K+/lhZBlSjnxwg==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>
            
        

    

    

    <!-- Config CSS -->

<!-- Other Styles -->
<style>
  body, html {
    font-family: Roboto, "Helvetica Neue", Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "微软雅黑", Arial, sans-serif;
    overflow-x: hidden !important;
  }
  
  code {
    font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
  }

  a {
    color: #00838F;
  }

  .mdl-card__media,
  #search-label,
  #search-form-label:after,
  #scheme-Paradox .hot_tags-count,
  #scheme-Paradox .sidebar_archives-count,
  #scheme-Paradox .sidebar-colored .sidebar-header,
  #scheme-Paradox .sidebar-colored .sidebar-badge{
    background-color: #0097A7 !important;
  }

  /* Sidebar User Drop Down Menu Text Color */
  #scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:hover,
  #scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:focus {
    color: #0097A7 !important;
  }

  #post_entry-right-info,
  .sidebar-colored .sidebar-nav li:hover > a,
  .sidebar-colored .sidebar-nav li:hover > a i,
  .sidebar-colored .sidebar-nav li > a:hover,
  .sidebar-colored .sidebar-nav li > a:hover i,
  .sidebar-colored .sidebar-nav li > a:focus i,
  .sidebar-colored .sidebar-nav > .open > a,
  .sidebar-colored .sidebar-nav > .open > a:hover,
  .sidebar-colored .sidebar-nav > .open > a:focus,
  #ds-reset #ds-ctx .ds-ctx-entry .ds-ctx-head a {
    color: #0097A7 !important;
  }

  .toTop {
    background: #757575 !important;
  }

  .material-layout .material-post>.material-nav,
  .material-layout .material-index>.material-nav,
  .material-nav a {
    color: #757575;
  }

  #scheme-Paradox .MD-burger-layer {
    background-color: #757575;
  }

  #scheme-Paradox #post-toc-trigger-btn {
    color: #757575;
  }

  .post-toc a:hover {
    color: #00838F;
    text-decoration: underline;
  }

</style>


<!-- Theme Background Related-->

    <style>
      body{
        background-image: url(/img/bg.jpg);
      }
    </style>




<!-- Fade Effect -->

    <style>
      .fade {
        transition: all 800ms linear;
        -webkit-transform: translate3d(0,0,0);
        -moz-transform: translate3d(0,0,0);
        -ms-transform: translate3d(0,0,0);
        -o-transform: translate3d(0,0,0);
        transform: translate3d(0,0,0);
        opacity: 1;
      }

      .fade.out{
        opacity: 0;
      }
    </style>


<!-- Import Font -->
<!-- Import Roboto -->

    <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500" rel="stylesheet">


<!-- Import Material Icons -->


    <style id="material_icons"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("material_icons","/css/material-icons.css?pqhB/Rd/ab0H2+kZp0RDmw==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>




    <!-- Import jQuery -->
    
        <script>lsloader.load("jq_js","/js/jquery.min.js?ezyEvm8ST5CGfpA+kFFi1g==", true)</script>
    

    <!-- WebAPP Icons -->
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="application-name" content="Husbin">
    <meta name="msapplication-starturl" content="http://easywork.xin/2018/02/05/ng2-4/">
    <meta name="msapplication-navbutton-color" content="#0097A7">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-title" content="Husbin">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon" href="/img/favicon.jpg">

    <!-- Site Verification -->
    <meta name="google-site-verification" content="z0Ny_8DovDGxvXH_bxA-J5aWKJrynnkENbNlw4yle64" />
    <meta name="baidu-site-verification" content="ZY9PuUsBYC" />

    <!-- RSS -->
    

    <!-- The Open Graph protocol -->
    <meta property="og:url" content="http://easywork.xin/2018/02/05/ng2-4/">
    <meta property="og:type" content="blog">
    <meta property="og:title" content="Angular2-基于动态创建组件的可配置表单设计 | Husbin">
    <meta property="og:image" content="/img/favicon.jpg">
    <meta property="og:description" content="I can not repair the compoter.">
    <meta property="og:article:tag" content="Angular2"> 

    
        <meta property="article:published_time" content="Mon Feb 05 2018 00:30:28 GMT+0800">
        <meta property="article:modified_time" content="Thu Feb 22 2018 14:42:42 GMT+0800">
    

    <!-- The Twitter Card protocol -->
    <meta name="twitter:card" content="summary_large_image">

    <!-- Add canonical link for SEO -->
    
        <link rel="canonical" href="http://easywork.xin/2018/02/05/ng2-4/index.html" />
    

    <!-- Structured-data for SEO -->
    
        


<script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "BlogPosting",
    "mainEntityOfPage": "http://easywork.xin/2018/02/05/ng2-4/index.html",
    "headline": "Angular2-基于动态创建组件的可配置表单设计",
    "datePublished": "Mon Feb 05 2018 00:30:28 GMT+0800",
    "dateModified": "Thu Feb 22 2018 14:42:42 GMT+0800",
    "author": {
        "@type": "Person",
        "name": "Husbin",
        "image": {
            "@type": "ImageObject",
            "url": "/img/touxiang.png"
        },
        "description": "I can not repair the compoter."
    },
    "publisher": {
        "@type": "Organization",
        "name": "Husbin",
        "logo": {
            "@type":"ImageObject",
            "url": "/img/favicon.jpg"
        }
    },
    "keywords": ",Angular2",
    "description": "I can not repair the compoter.",
}
</script>


    

    <!-- Analytics -->
    
    
    

    <!-- Custom Head -->
    

    <meta name="google-site-verification" content="z0Ny_8DovDGxvXH_bxA-J5aWKJrynnkENbNlw4yle64" />
    <meta name="baidu-site-verification" content="ZY9PuUsBYC" />

</head>


    
        <body id="scheme-Paradox" class="lazy">
            <div class="material-layout  mdl-js-layout has-drawer is-upgraded">
                

                <!-- Main Container -->
                <main class="material-layout__content" id="main">

                    <!-- Top Anchor -->
                    <div id="top"></div>

                    
                        <!-- Hamburger Button -->
                        <button class="MD-burger-icon sidebar-toggle">
                            <span class="MD-burger-layer"></span>
                        </button>
                    

                    <!-- Post TOC -->

    
    <!-- Back Button -->
    <!--
    <div class="material-back" id="backhome-div" tabindex="0">
        <a class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon"
           href="#" onclick="window.history.back();return false;"
           target="_self"
           role="button"
           data-upgraded=",MaterialButton,MaterialRipple">
            <i class="material-icons" role="presentation">arrow_back</i>
            <span class="mdl-button__ripple-container">
                <span class="mdl-ripple"></span>
            </span>
        </a>
    </div>
    -->


    <!-- Left aligned menu below button -->
    
    
    <button id="post-toc-trigger-btn"
        class="mdl-button mdl-js-button mdl-button--icon">
        <i class="material-icons">format_list_numbered</i>
    </button>

    <ul class="post-toc-wrap mdl-menu mdl-menu--bottom-left mdl-js-menu mdl-js-ripple-effect" for="post-toc-trigger-btn" style="max-height:80vh; overflow-y:scroll;">
        <ol class="post-toc"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#需求"><span class="post-toc-number">1.</span> <span class="post-toc-text">需求</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#动态创建"><span class="post-toc-number">2.</span> <span class="post-toc-text">动态创建</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#开始之前，先介绍几个对象"><span class="post-toc-number">2.1.</span> <span class="post-toc-text">开始之前，先介绍几个对象</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#1-建立DynamicComponentDirective"><span class="post-toc-number">2.2.</span> <span class="post-toc-text">1. 建立DynamicComponentDirective</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#2-使用ComponentFactoryResolver动态产生组件"><span class="post-toc-number">2.3.</span> <span class="post-toc-text">2. 使用ComponentFactoryResolver动态产生组件</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#3-在Module中加入entryComponents"><span class="post-toc-number">2.4.</span> <span class="post-toc-text">3. 在Module中加入entryComponents</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#4-效果展示"><span class="post-toc-number">2.5.</span> <span class="post-toc-text">4. 效果展示</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#动态创建表单与表单的渲染"><span class="post-toc-number">3.</span> <span class="post-toc-text">动态创建表单与表单的渲染</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#动态创建组件："><span class="post-toc-number">3.1.</span> <span class="post-toc-text">动态创建组件：</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#点击保存模板，保存json，根据json重新渲染表单："><span class="post-toc-number">3.2.</span> <span class="post-toc-text">点击保存模板，保存json，根据json重新渲染表单：</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#具体步骤如下："><span class="post-toc-number">3.3.</span> <span class="post-toc-text">具体步骤如下：</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#1-以输入框为例，定义json格式"><span class="post-toc-number">3.3.1.</span> <span class="post-toc-text">1. 以输入框为例，定义json格式</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#2-创建可配置组件（以输入框为例）"><span class="post-toc-number">3.3.2.</span> <span class="post-toc-text">2. 创建可配置组件（以输入框为例）</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#3-动态创建表单"><span class="post-toc-number">3.3.3.</span> <span class="post-toc-text">3. 动态创建表单</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#操作演示："><span class="post-toc-number">3.3.4.</span> <span class="post-toc-text">操作演示：</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#最后"><span class="post-toc-number">4.</span> <span class="post-toc-text">最后</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#源码地址-gt-Demo"><span class="post-toc-number">4.1.</span> <span class="post-toc-text">源码地址-&gt;Demo</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#在线示例-gt-在线demo"><span class="post-toc-number">4.2.</span> <span class="post-toc-text">在线示例-&gt;在线demo</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#Reference"><span class="post-toc-number">4.3.</span> <span class="post-toc-text">Reference</span></a></li></ol></li></ol>
    </ul>
    




<!-- Layouts -->

    <!-- Post Module -->
    <div class="material-post_container">

        <div class="material-post mdl-grid">
            <div class="mdl-card mdl-shadow--4dp mdl-cell mdl-cell--12-col">

                <!-- Post Header(Thumbnail & Title) -->
                
    <!-- Paradox Post Header -->
    
        
            <!-- Random Thumbnail -->
            <div class="post_thumbnail-random mdl-card__media mdl-color-text--grey-50">
            <script type="text/ls-javascript" id="post-thumbnail-script">
    var randomNum = Math.floor(Math.random() * 19 + 1);

    $('.post_thumbnail-random').attr('data-original', '/img/random/material-' + randomNum + '.png');
    $('.post_thumbnail-random').addClass('lazy');
</script>

        
    
            <p class="article-headline-p">
                Angular2-基于动态创建组件的可配置表单设计
            </p>
        </div>





                
                    <!-- Paradox Post Info -->
                    <div class="mdl-color-text--grey-700 mdl-card__supporting-text meta">

    <!-- Author Avatar -->
    <div id="author-avatar">
        <img src="/img/touxiang.png" width="44px" height="44px" alt="Author Avatar"/>
    </div>
    <!-- Author Name & Date -->
    <div>
        <strong>Husbin</strong>
        <span>2月 05, 2018</span>
    </div>

    <div class="section-spacer"></div>

    <!-- Favorite -->
    <!--
        <button id="article-functions-like-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon btn-like">
            <i class="material-icons" role="presentation">favorite</i>
            <span class="visuallyhidden">favorites</span>
        </button>
    -->

    <!-- Qrcode -->
    

    <!-- Tags (bookmark) -->
    
    <button id="article-functions-viewtags-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
        <i class="material-icons" role="presentation">bookmark</i>
        <span class="visuallyhidden">bookmark</span>
    </button>
    <ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-functions-viewtags-button">
        <li class="mdl-menu__item">
        <a class="post_tag-link" href="/tags/Angular2/">Angular2</a>
    </ul>
    

    <!-- Share -->
    
        <button id="article-fuctions-share-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
    <i class="material-icons" role="presentation">share</i>
    <span class="visuallyhidden">share</span>
</button>
<ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-fuctions-share-button">
    

    

    <!-- Share Weibo -->
    
        <a class="post_share-link" href="http://service.weibo.com/share/share.php?appkey=&title=Angular2-基于动态创建组件的可配置表单设计&url=http://easywork.xin/2018/02/05/ng2-4/index.html&pic=http://easywork.xin/img/favicon.jpg&searchPic=false&style=simple" target="_blank">
            <li class="mdl-menu__item">
                分享到微博
            </li>
        </a>
    

    <!-- Share Twitter -->
    
        <a class="post_share-link" href="https://twitter.com/intent/tweet?text=Angular2-基于动态创建组件的可配置表单设计&url=http://easywork.xin/2018/02/05/ng2-4/index.html&via=Husbin" target="_blank">
            <li class="mdl-menu__item">
                分享到 Twitter
            </li>
        </a>
    

    <!-- Share Facebook -->
    
        <a class="post_share-link" href="https://www.facebook.com/sharer/sharer.php?u=http://easywork.xin/2018/02/05/ng2-4/index.html" target="_blank">
            <li class="mdl-menu__item">
                分享到 Facebook
            </li>
        </a>
    

    <!-- Share Google+ -->
    
        <a class="post_share-link" href="https://plus.google.com/share?url=http://easywork.xin/2018/02/05/ng2-4/index.html" target="_blank">
            <li class="mdl-menu__item">
                分享到 Google+
            </li>
        </a>
    

    <!-- Share LinkedIn -->
    

    <!-- Share QQ -->
    
        <a class="post_share-link" href="http://connect.qq.com/widget/shareqq/index.html?site=Husbin&title=Angular2-基于动态创建组件的可配置表单设计&summary=I can not repair the compoter.&pics=http://easywork.xin/img/favicon.jpg&url=http://easywork.xin/2018/02/05/ng2-4/index.html" target="_blank">
            <li class="mdl-menu__item">
                分享到 QQ
            </li>
        </a>
    

    <!-- Share Telegram -->
    
</ul>

    
</div>

                

                <!-- Post Content -->
                <div id="post-content" class="mdl-color-text--grey-700 mdl-card__supporting-text fade out">
    
        <h3 id="需求"><a href="#需求" class="headerlink" title="需求"></a>需求</h3><ul>
<li>提供给管理员配置简历表单的功能。</li>
<li>基本思路：将一个个表单项做成组件（例如输入框，单选框，复选框，图片，文件，日期等），每个组件对应一段固定的<code>json</code>（包括组件名，<code>placeholder</code>，选项个数，字数限制等等），方便存储。每增加一项就向<code>json</code>数组中增加一个元素，然后把这段<code>json</code>存到后端。每个应聘者的简历其实就是一份<code>json</code>，查看的时候根据这段<code>json</code>利用动态创建的方式渲染出来。</li>
</ul>
<h3 id="动态创建"><a href="#动态创建" class="headerlink" title="动态创建"></a>动态创建</h3><p>​    Angular提供了<a href="https://angular.io/api/core/ComponentFactoryResolver" target="_blank" rel="noopener"><code>ComponentFactoryResolver</code></a>，来协助我们在程序中动态产生不同的组件，而不用死板地把所有的组件都写到<code>view</code>中去，再根据条件判断是否要显示某个组件，当遇到呈现的方式比较复杂的需求时非常好用，写出来的代码也会简洁，好看很多。例如可配置表单（简历，问卷），还有滚动广告等。</p>
<h4 id="开始之前，先介绍几个对象"><a href="#开始之前，先介绍几个对象" class="headerlink" title="开始之前，先介绍几个对象"></a>开始之前，先介绍几个对象</h4><ol>
<li><code>ViewChild</code>：一个属性装饰器，用来从模板视图中获取对应的元素，可以通过模板变量获取，获取时可以通过 read 属性设置查询的条件，就是说可以把此视图转为不同的实例。</li>
<li><code>ViewContainerRef</code>：一个视图容器，可以在此上面创建、插入、删除组件等等。</li>
<li><code>ComponentFactoryResolve</code>：一个服务，动态加载组件的核心，这个服务可以将一个组件实例呈现到另一个组件视图上。</li>
<li><code>entryComponents</code>：这个数组是用<code>ViewContainerRef.createComponent（）</code>添加的动态添加的组件。将它们添加到<code>entryComponents</code>是告诉编译器编译它们并为它们创建<code>Factory</code>。路由配置中注册的组件也自动添加到<code>entryComponents</code>，因为<code>router-outlet</code>也使用<code>ViewContainerRef.createComponent（）</code>将路由组件添加到DOM。</li>
</ol>
<ul>
<li>有了上面，一个简单的思路便连贯了：特定区域就是一个视图容器，可以通过 <code>ViewChild</code>来实现获取和查询，然后使用<code>ComponentFactoryResolve</code>将已声明未实例化的组件解析成为可以动态加载的 <code>component</code>，再将此<code>component</code>呈现到此前的视图容器中。</li>
</ul>
<h4 id="1-建立DynamicComponentDirective"><a href="#1-建立DynamicComponentDirective" class="headerlink" title="1. 建立DynamicComponentDirective"></a>1. 建立<code>DynamicComponentDirective</code></h4><p>​    首先先建立一个<code>directive</code>，并注入<code>ViewContainerRef</code>，<code>ViewContainerRef</code>是一个视图容器，可以在此上面创建、插入、删除组件等等，代码如下：</p>
<pre><code class="typescript">// DynamicComponentDirective.ts
import {Directive, ViewContainerRef} from &#39;@angular/core&#39;;

@Directive({
  selector: &#39;[dynamicComponent]&#39;
})
export class DynamicComponentDirective {
  constructor(public viewContainerRef: ViewContainerRef) { }
}
</code></pre>
<p>​    接着套用这个<code>directive</code>到需要动态加载的组件的容器上，简单套用<code>&lt;ng-template&gt;</code>。</p>
<pre><code class="html">  &lt;!--动态产生组件的容器--&gt;
  &lt;ng-template dynamicComponent&gt;&lt;/ng-template&gt;
</code></pre>
<h4 id="2-使用ComponentFactoryResolver动态产生组件"><a href="#2-使用ComponentFactoryResolver动态产生组件" class="headerlink" title="2. 使用ComponentFactoryResolver动态产生组件"></a>2. 使用<code>ComponentFactoryResolver</code>动态产生组件</h4><p>​    直接看代码，都加了注释。</p>
<pre><code class="typescript">import {Component, ComponentFactoryResolver, ViewChild} from &#39;@angular/core&#39;;
import {DynamicComponentDirective} from &#39;./DynamicComponentDirective&#39;;
import {SampleComponent} from &#39;./sample/sample.component&#39;;

@Component({
  selector: &#39;app-root&#39;,
  templateUrl: &#39;./app.component.html&#39;,
  styleUrls: [&#39;./app.component.css&#39;]
})
export class AppComponent {
  // 使用ViewChild取得要动态放置Component的directive(componentHost)
  @ViewChild(DynamicComponentDirective) componentHost: DynamicComponentDirective;
  constructor(
    // 注入ComponentFactoryResolver
    private componentFactoryResolver: ComponentFactoryResolver
  ) { }
  title = &#39;动态创建组件样例&#39;;
  createNewComponent() {
    // 建立ComponentFactory
    const componentFactory = this.componentFactoryResolver.resolveComponentFactory(SampleComponent);
    const viewContainerRef = this.componentHost.viewContainerRef;
    // 产生我们需要的Component并放入componentHost之中
    viewContainerRef.createComponent(componentFactory);
    // const componentRef = viewContainerRef.createComponent(componentFactory);
  }
  clearView() {
    const viewContainerRef = this.componentHost.viewContainerRef;
    viewContainerRef.clear();
  }
}
</code></pre>
<pre><code class="html">&lt;div style=&quot;text-align:center&quot;&gt;
  &lt;h1&gt;
    {{ title }}
  &lt;/h1&gt;
  &lt;!--动态产生组件的容器--&gt;
  &lt;ng-template dynamicComponent&gt;&lt;/ng-template&gt;
  &lt;button (click)=&quot;createNewComponent()&quot;&gt;动态创建组件&lt;/button&gt;
  &lt;button (click)=&quot;clearView()&quot;&gt;清除视图&lt;/button&gt;
&lt;/div&gt;
</code></pre>
<h4 id="3-在Module中加入entryComponents"><a href="#3-在Module中加入entryComponents" class="headerlink" title="3. 在Module中加入entryComponents"></a>3. 在<code>Module</code>中加入<code>entryComponents</code></h4><pre><code class="typescript">import { BrowserModule } from &#39;@angular/platform-browser&#39;;
import { NgModule } from &#39;@angular/core&#39;;
import { AppComponent } from &#39;./app.component&#39;;
import { SampleComponent } from &#39;./sample/sample.component&#39;;
import {DynamicComponentDirective} from &#39;./DynamicComponentDirective&#39;;
@NgModule({
  declarations: [
    AppComponent,
    SampleComponent,
    DynamicComponentDirective
  ],
  imports: [
    BrowserModule
  ],
  entryComponents: [
    SampleComponent
  ],
  providers: [],
  bootstrap: [AppComponent]
})
export class AppModule { }
</code></pre>
<h4 id="4-效果展示"><a href="#4-效果展示" class="headerlink" title="4. 效果展示"></a>4. 效果展示</h4><p><img src="http://upload-images.jianshu.io/upload_images/7166236-e6d99b4b75040751.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p>有了以上知识铺垫，可以进入下一阶段。</p>
<h3 id="动态创建表单与表单的渲染"><a href="#动态创建表单与表单的渲染" class="headerlink" title="动态创建表单与表单的渲染"></a>动态创建表单与表单的渲染</h3><ul>
<li>要实现的效果如下：</li>
</ul>
<ol>
<li>动态创建一个组件，生成一段<code>json</code>。</li>
<li>根据<code>json</code>数组生成表单。</li>
</ol>
<h4 id="动态创建组件："><a href="#动态创建组件：" class="headerlink" title="动态创建组件："></a>动态创建组件：</h4><p><img src="http://upload-images.jianshu.io/upload_images/7166236-fbddee133f5bcc83.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<h4 id="点击保存模板，保存json，根据json重新渲染表单："><a href="#点击保存模板，保存json，根据json重新渲染表单：" class="headerlink" title="点击保存模板，保存json，根据json重新渲染表单："></a>点击保存模板，保存json，根据json重新渲染表单：</h4><p><img src="http://upload-images.jianshu.io/upload_images/7166236-5e2dfe31fd6e0252.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<h4 id="具体步骤如下："><a href="#具体步骤如下：" class="headerlink" title="具体步骤如下："></a>具体步骤如下：</h4><h5 id="1-以输入框为例，定义json格式"><a href="#1-以输入框为例，定义json格式" class="headerlink" title="1. 以输入框为例，定义json格式"></a>1. 以输入框为例，定义<code>json</code>格式</h5><pre><code class="typescript">// FormJson.ts
export class FormJson {
  public static basedata: any = {
    name : &#39;&#39;,                   // 子项名称
    id : &#39;&#39;,
    hintText : &#39;&#39;,               // 子选项提示
    type : &#39;&#39;,                   // 组件类型
    numberLimit : &#39;&#39;,            // 字数限制
    content : [],                // 存放用户填写信息
  };
}
</code></pre>
<h5 id="2-创建可配置组件（以输入框为例）"><a href="#2-创建可配置组件（以输入框为例）" class="headerlink" title="2. 创建可配置组件（以输入框为例）"></a>2. 创建可配置组件（以输入框为例）</h5><p>执行<code>ng -g component input</code>新建一个组件，代码如下：</p>
<pre><code class="html">&lt;!--input.component.html--&gt;
&lt;!--显示模板--&gt;
&lt;div&gt;
  &lt;label for=&quot;input&quot;&gt;{{item.name}}&lt;/label&gt;
  &lt;input
    id=&quot;input&quot;
    [(ngModel)]=&quot;item.content&quot;
    type=&quot;{{item.type}}&quot;
    placeholder=&quot;{{item.hintText}}&quot;
  &gt;
&lt;/div&gt;
</code></pre>
<pre><code class="typescript">//input.component.ts
import {Component, Input, OnInit} from &#39;@angular/core&#39;;
@Component({
  selector: &#39;app-input&#39;,
  templateUrl: &#39;./input.component.html&#39;,
  styleUrls: [&#39;./input.component.css&#39;]
})
export class InputComponent implements OnInit {
  constructor() { }
  // 接收管理员配置的参数
  @Input() item: any;
  ngOnInit() {
  }
}
</code></pre>
<h5 id="3-动态创建表单"><a href="#3-动态创建表单" class="headerlink" title="3. 动态创建表单"></a>3. 动态创建表单</h5><p>基本操作与动态创建组件是一样的，每创建一个新的表单项，<code>formJson</code>数组就增加一个元素，这里存储表单模板用的是<code>json</code>，所以渲染的时候要根据<code>type</code>来判断要创建什么组件，当然我这里只做了个输入框，只做示例，其他的组件可以举一反三。代码解析如下：</p>
<pre><code class="typescript">// app.component.ts
import {Component, ComponentFactoryResolver, ViewChild} from &#39;@angular/core&#39;;
import {DynamicComponentDirective} from &#39;./share/DynamicComponentDirective&#39;;
import {SampleComponent} from &#39;./sample/sample.component&#39;;
import {FormJson} from &#39;./share/FormJson&#39;;
import {InputComponent} from &#39;./input/input.component&#39;;
@Component({
  selector: &#39;app-root&#39;,
  templateUrl: &#39;./app.component.html&#39;,
  styleUrls: [&#39;./app.component.css&#39;]
})
export class AppComponent {
  // 使用ViewChild取得要动态放置Component的directive(componentHost)
  @ViewChild(DynamicComponentDirective) componentHost: DynamicComponentDirective;
  public baseData = JSON.parse(JSON.stringify(FormJson.basedata));
  public formJson = [];
  public save = false;          // 模拟根据后端json重新加载表单
  public formJsonText: string; // json文本
  constructor(
    // 注入ComponentFactoryResolver
    private componentFactoryResolver: ComponentFactoryResolver
  ) { }
  // 动态创建组件
  createInputComponent() {
    // 示例类型都是文本输入框，所以type字段都置为 text
    this.baseData.type = &#39;text&#39;;
    // 将json插入，完成之后可存到后端
    this.formJson.push(this.baseData);
    // 页面显示json
    this.formJsonText = JSON.stringify(this.formJson);
    console.log(this.formJson);
    // 清除旧预览
    this.componentHost.viewContainerRef.clear();
    // 渲染新示例页面
    this.createForm(this.formJson);
    // 将json元素赋空，方便下次创建
    this.baseData = JSON.parse(JSON.stringify(FormJson.basedata));
  }
  // 根据json动态创建表单
  createForm(formJson) {
    const inputComponentFactory = this.componentFactoryResolver.resolveComponentFactory(InputComponent);
    // 遍历json 根据不同类型创建组件，可扩充
    for (let i = 0 ; i &lt; formJson.length ; i++) {
      const item = formJson[i] ;
      let componentRef;
      switch (item.type) {
        case &#39;text&#39;:
          componentRef = this.componentHost.viewContainerRef.createComponent(inputComponentFactory);
          componentRef.instance.componentRef = componentRef;  // 传入自身组件引用，用于返回来编辑自身
          componentRef.instance.item = item;                  // 将管理员配置数据传进组件渲染
          break;
      }
    }
  }
  saveForm() {
    this.componentHost.viewContainerRef.clear();
    // todo 将表单模板存到后端
    console.log(this.formJson);
    this.save = true;
    setTimeout(() =&gt; {
      // todo 根据json重新解析，其实就像预览一样，调用createForm
      // 延时3s查看效果，便于理解
      this.createForm(this.formJson);
    }, 3000);
  }
}
</code></pre>
<pre><code class="html">&lt;div style=&quot;width: 300px; float: left;height: 400px&quot; align=&quot;center&quot;&gt;
  &lt;p&gt;示例：创建自定义输入框&lt;/p&gt;
  &lt;div&gt;
  &lt;label for=&quot;name&quot;&gt;输入框名字:&lt;/label&gt;
    &lt;input
      id=&quot;name&quot;
      [(ngModel)]=&quot;baseData.name&quot;
    &gt;
  &lt;/div&gt;
  &lt;div&gt;
      &lt;label for=&quot;placeholder&quot;&gt;输入框提示:&lt;/label&gt;
      &lt;input
        id=&quot;placeholder&quot;
        [(ngModel)]=&quot;baseData.hintText&quot;
      &gt;
    &lt;/div&gt;
  &lt;div align=&quot;center&quot; style=&quot;margin: 10px&quot;&gt;
  &lt;button (click)=&quot;createInputComponent()&quot;&gt;动态创建组件&lt;/button&gt;
  &lt;/div&gt;
&lt;/div&gt;
&lt;div style=&quot;width: 300px;margin-left: 500px;height: 400px&quot; align=&quot;center&quot;&gt;
  &lt;div&gt;
  &lt;p *ngIf=&quot;save === false&quot;&gt;示例：预览&lt;/p&gt;
    &lt;div *ngIf=&quot;save&quot;&gt;
      &lt;p&gt;--------JSON重新转化为表单-----------&lt;/p&gt;
      &lt;p&gt;--------延时让效果更明显-----------&lt;/p&gt;
    &lt;/div&gt;
  &lt;ng-template dynamicComponent&gt;&lt;/ng-template&gt;
  &lt;/div&gt;
  &lt;div style=&quot;margin: 10px&quot;&gt;
  &lt;button (click)=&quot;saveForm()&quot;&gt;保存模板&lt;/button&gt;
  &lt;/div&gt;
&lt;/div&gt;
&lt;div style=&quot;width: 500px;height: 400px&quot; align=&quot;center&quot;&gt;
  &lt;div&gt;
    &lt;p &gt;打印JSON&lt;/p&gt;
  &lt;/div&gt;
  &lt;div style=&quot;margin: 10px&quot;&gt;
    &lt;textarea [(ngModel)] = &quot;formJsonText&quot; rows=&quot;30&quot; style=&quot;width: 500px&quot;&gt;&lt;/textarea&gt;
  &lt;/div&gt;
&lt;/div&gt;
</code></pre>
<h5 id="操作演示："><a href="#操作演示：" class="headerlink" title="操作演示："></a>操作演示：</h5><ul>
<li>动态创建一个组件</li>
</ul>
<p><img src="http://upload-images.jianshu.io/upload_images/7166236-5042dab2f69aabc0.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<ul>
<li>观察预览和son输出</li>
</ul>
<p><img src="http://upload-images.jianshu.io/upload_images/7166236-d2c4d49b32bab25e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<ul>
<li>点击生成模板，根据json重新渲染组件</li>
</ul>
<p><img src="http://upload-images.jianshu.io/upload_images/7166236-0fa740fe6dd094d4.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<h3 id="最后"><a href="#最后" class="headerlink" title="最后"></a>最后</h3><h4 id="源码地址-gt-Demo"><a href="#源码地址-gt-Demo" class="headerlink" title="源码地址-&gt;Demo"></a>源码地址-&gt;<a href="https://github.com/Husbin/web/tree/master/DynamicComponent" target="_blank" rel="noopener">Demo</a></h4><h4 id="在线示例-gt-在线demo"><a href="#在线示例-gt-在线demo" class="headerlink" title="在线示例-&gt;在线demo"></a>在线示例-&gt;<a href="http://119.23.214.114:8889" target="_blank" rel="noopener">在线demo</a></h4><p>​    这只是我个人对项目中的用法的总结，欢迎大家指正与交流。还有就是demo只是个demo，我并没有花时间去做检查、控制之类的，所以有bug很正常。。</p>
<h4 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h4><ol>
<li><a href="https://dotblogs.com.tw/wellwind/2017/06/21/dynamic-component-with-component-factory-resolver" target="_blank" rel="noopener">reference – 使用ComponentFactoryResolver动态产生Component</a></li>
<li><a href="https://www.jianshu.com/p/10feab2c3102" target="_blank" rel="noopener">reference – angular2(4) 中动态创建组件的两种方案</a></li>
</ol>

        
    

    
</div>


                

                <!-- Post Comments -->
                
                    
                
            </div>

            <!-- Post Prev & Next Nav -->
            <nav class="material-nav mdl-color-text--grey-50 mdl-cell mdl-cell--12-col">
    <!-- Prev Nav -->
    
        <a href="/2018/02/06/html-1/" id="post_nav-newer" class="prev-content">
            <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900" role="presentation">
                <i class="material-icons">arrow_back</i>
            </button>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            新篇
        </a>
    

    <!-- Section Spacer -->
    <div class="section-spacer"></div>

    <!-- Next Nav -->
    
        <a href="/2018/02/02/the-first-day/" id="post_nav-older" class="next-content">
            旧篇
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900" role="presentation">
                <i class="material-icons">arrow_forward</i>
            </button>
        </a>
    
</nav>

        </div>
    </div>



                    
                        <!-- Overlay For Active Sidebar -->
<div class="sidebar-overlay"></div>

<!-- Material sidebar -->
<aside id="sidebar" class="sidebar sidebar-colored sidebar-fixed-left" role="navigation">
    <div id="sidebar-main">
        <!-- Sidebar Header -->
        <div class="sidebar-header header-cover" style="background-image: url(/img/sidebar.png);">
    <!-- Top bar -->
    <div class="top-bar"></div>

    <!-- Sidebar toggle button -->
    <button type="button" class="sidebar-toggle mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon" style="display: initial;" data-upgraded=",MaterialButton,MaterialRipple">
        <i class="material-icons">clear_all</i>
        <span class="mdl-button__ripple-container">
            <span class="mdl-ripple">
            </span>
        </span>
    </button>

    <!-- Sidebar Avatar -->
    <div class="sidebar-image">
        <img src="/img/touxiang.png" alt="Husbin's avatar">
    </div>

    <!-- Sidebar Email -->
    <a data-toggle="dropdown" class="sidebar-brand" href="#settings-dropdown">
        2905895313@qq.com
        <b class="caret"></b>
    </a>
</div>


        <!-- Sidebar Navigation  -->
        <ul class="nav sidebar-nav">
    <!-- User dropdown  -->
    <li class="dropdown">
        <ul id="settings-dropdown" class="dropdown-menu">
            
                <li>
                    <a href="https://mail.qq.com/" target="_blank" title="Email Me">
                        
                            <i class="material-icons sidebar-material-icons sidebar-indent-left1pc-element">email</i>
                        
                        Email Me
                    </a>
                </li>
            
        </ul>
    </li>

    <!-- Homepage -->
    
        <li id="sidebar-first-li">
            <a href="/">
                
                    <i class="material-icons sidebar-material-icons">home</i>
                
                主页
            </a>
        </li>
        
    

    <!-- Archives  -->
    
        <li class="dropdown">
            <a href="#" class="ripple-effect dropdown-toggle" data-toggle="dropdown">
                
                    <i class="material-icons sidebar-material-icons">inbox</i>
                
                    归档
                <b class="caret"></b>
            </a>
            <ul class="dropdown-menu">
            <li>
                <a class="sidebar_archives-link" href="/archives/2018/02/">二月 2018<span class="sidebar_archives-count">11</span></a></li><li><a class="sidebar_archives-link" href="/archives/2018/01/">一月 2018<span class="sidebar_archives-count">5</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/11/">十一月 2017<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/10/">十月 2017<span class="sidebar_archives-count">8</span></a>
            </ul>
        </li>
        
    

    <!-- Categories  -->
    
        <li class="dropdown">
            <a href="#" class="ripple-effect dropdown-toggle" data-toggle="dropdown">
                
                    <i class="material-icons sidebar-material-icons">chrome_reader_mode</i>
                
                分类
                <b class="caret"></b>
            </a>
            <ul class="dropdown-menu">
                <li>
                <a class="sidebar_archives-link" href="/categories/javascript/">javascript<span class="sidebar_archives-count">5</span></a></li><li><a class="sidebar_archives-link" href="/categories/web基础知识/">web基础知识<span class="sidebar_archives-count">6</span></a></li><li><a class="sidebar_archives-link" href="/categories/web框架/">web框架<span class="sidebar_archives-count">11</span></a></li><li><a class="sidebar_archives-link" href="/categories/琐言碎语/">琐言碎语<span class="sidebar_archives-count">3</span></a></li><li><a class="sidebar_archives-link" href="/categories/设计模式/">设计模式<span class="sidebar_archives-count">1</span></a>
            </ul>
        </li>
        
    

    <!-- Pages  -->
    
        <li>
            <a href="/about.html" title="个人记录">
                
                    <i class="material-icons sidebar-material-icons">person</i>
                
                个人记录
            </a>
        </li>
        
    

    <!-- Article Number  -->
    
        <li>
            <a href="/archives">
                文章总数
                <span class="sidebar-badge">26</span>
            </a>
        </li>
        
    
</ul>


        <!-- Sidebar Footer -->
        <!--
I'm glad you use this theme, the development is no so easy, I hope you can keep the copyright, I will thank you so much.
If you still want to delete the copyrights, could you still retain the first one? Which namely "Theme Material"
It will not impact the appearance and can give developers a lot of support :)

很高兴您使用并喜欢该主题，开发不易 十分谢谢与希望您可以保留一下版权声明。
如果您仍然想删除的话 能否只保留第一项呢？即 "Theme Material"
它不会影响美观并可以给开发者很大的支持和动力。 :)
-->

<!-- Sidebar Divider -->


<!-- Theme Material -->


<!-- Help & Support -->
<!--

-->

<!-- Feedback -->
<!--

-->

<!-- About Theme -->
<!--

-->

    </div>

    <!-- Sidebar Image -->
    

</aside>

                    

                    
                        <!-- Footer Top Button -->
                        <div id="back-to-top" class="toTop-wrap">
    <a href="#top" class="toTop">
        <i class="material-icons footer_top-i">expand_less</i>
    </a>
</div>

                    

                    <!--Footer-->
<footer class="mdl-mini-footer" id="bottom">
    
        <!-- Paradox Footer Left Section -->
        <div class="mdl-mini-footer--left-section sns-list">
    <!-- Twitter -->
    

    <!-- Facebook -->
    

    <!-- Google + -->
    

    <!-- Weibo -->
    

    <!-- Instagram -->
    

    <!-- Tumblr -->
    

    <!-- Github -->
    
        <a href="https://github.com/Husbin" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn footer-sns-github">
                <span class="visuallyhidden">Github</span>
            </button><!--
     --></a>
    

    <!-- LinkedIn -->
    

    <!-- Zhihu -->
    
        <a href="https://www.zhihu.com/people/wu-ze-bin-68/activities" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn footer-sns-zhihu">
                <span class="visuallyhidden">Zhihu</span>
            </button><!--
     --></a>
    

    <!-- Bilibili -->
    

    <!-- Telegram -->
    
    
    <!-- V2EX -->
    
</div>


        <!--Copyright-->
        <div id="copyright">
            Copyright&nbsp;©&nbsp;2017&nbsp;-<script type="text/javascript">var fd = new Date();document.write("&nbsp;" + fd.getFullYear() + "&nbsp;");</script>Husbin
            
        </div>

        <!-- Paradox Footer Right Section -->

        <!--
        I am glad you use this theme, the development is no so easy, I hope you can keep the copyright.
        It will not impact the appearance and can give developers a lot of support :)

        很高兴您使用该主题，开发不易，希望您可以保留一下版权声明。
        它不会影响美观并可以给开发者很大的支持。 :)
        -->

        <div class="mdl-mini-footer--right-section">
            <div>
                <div class="footer-develop-div">Powered by <a href="https://hexo.io" target="_blank" class="footer-develop-a">Hexo</a></div>
                <div class="footer-develop-div">Theme - <a href="https://github.com/viosey/hexo-theme-material" target="_blank" class="footer-develop-a">Material</a></div>
            </div>
        </div>
    
</footer>


                    <!-- Import JS File -->

    <script>lsloader.load("lazyload_js","/js/lazyload.min.js?wgjW/HuQG9JDgvPDPoRAng==", true)</script>



    <script>lsloader.load("js_js","/js/js.min.js?V/53wGualMuiPM3xoetD5Q==", true)</script>



    <script>lsloader.load("np_js","/js/nprogress.js?pl3Qhb9lvqR1FlyLUna1Yw==", true)</script>


<script type="text/ls-javascript" id="NProgress-script">
    NProgress.configure({
        showSpinner: true
    });
    NProgress.start();
    $('#nprogress .bar').css({
        'background': '#29d'
    });
    $('#nprogress .peg').css({
        'box-shadow': '0 0 10px #29d, 0 0 15px #29d'
    });
    $('#nprogress .spinner-icon').css({
        'border-top-color': '#29d',
        'border-left-color': '#29d'
    });
    setTimeout(function() {
        NProgress.done();
        $('.fade').removeClass('out');
    }, 800);
</script>



    
        <script>lsloader.load("sm_js","/js/smoothscroll.js?tNQK2Tw2SUL8a1Scn/Mgew==", true)</script>
    











<!-- UC Browser Compatible -->
<script>
	var agent = navigator.userAgent.toLowerCase();
	if(agent.indexOf('ucbrowser')>0) {
		document.write('<link rel="stylesheet" href="/css/uc.css">');
	   alert('由于 UC 浏览器使用极旧的内核，而本网站使用了一些新的特性。\n为了您能更好的浏览，推荐使用 Chrome 或 Firefox 浏览器。');
	}
</script>

<!-- Import prettify js  -->

    
        
            <script>lsloader.load("prettify_js","/js/prettify.min.js?WN07fivHQSMKWy7BmHBB6w==", true)</script>
        
    



<!-- Window Load -->
<!-- add class for prettify -->
<script type="text/ls-javascript" id="window-load">
    $(window).on('load', function() {
        // Post_Toc parent position fixed
        $('.post-toc-wrap').parent('.mdl-menu__container').css('position', 'fixed');
    });

    
        
            $(function() {
                $('pre').addClass('prettyprint linenums').attr('style', 'overflow:auto;');
                prettyPrint();
                })
        
    
    
</script>

<!-- MathJax Load-->


<!-- Bing Background -->


<script type="text/ls-javascript" id="lazy-load">
    // Offer LazyLoad
    queue.offer(function(){
        $('.lazy').lazyload({
            effect : 'show'
        });
    });

    // Start Queue
    $(document).ready(function(){
        setInterval(function(){
            queue.execNext();
        },200);
    });
</script>

<!-- Custom Footer -->



<script>
    (function(){
        var scriptList = document.querySelectorAll('script[type="text/ls-javascript"]')

        for (var i = 0; i < scriptList.length; ++i) {
            var item = scriptList[i];
            lsloader.runInlineScript(item.id,item.id);
        }
    })()
console.log('\n %c © Material Theme | Version: 1.5.2 | https://github.com/viosey/hexo-theme-material %c \n', 'color:#455a64;background:#e0e0e0;padding:5px 0;border-top-left-radius:5px;border-bottom-left-radius:5px;', 'color:#455a64;background:#e0e0e0;padding:5px 0;border-top-right-radius:5px;border-bottom-right-radius:5px;');
</script>

                </main>
            </div>
        </body>
    
</html>
